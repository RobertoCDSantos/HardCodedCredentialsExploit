import os

def search_and_extract_credentials(path, log_file_path):
    with open(log_file_path, 'w') as log_file:
        patterns = ['username', 'password', 'pass', 'user']  # Add more patterns if needed
        for root, dirs, files in os.walk(path):
            for file in files:
                if file.endswith('.py'):  # Looking in Python files
                    file_path = os.path.join(root, file)
                    found_credentials = False
                    credentials = []
                    with open(file_path, 'r', encoding='utf-8') as f:
                        lines = f.readlines()
                        for line in lines:
                            for pattern in patterns:
                                if pattern in line:
                                    found_credentials = True
                                    credentials.append(line.strip())

                    if found_credentials:
                        log_file.write(f"Credentials found in file: {file_path}\n")
                        for credential in credentials:
                            log_file.write(credential + '\n')




search_and_extract_credentials('C:\\Users\\Roberto\\Desktop\\UAlg\\PosGraduação CiberSegurança\\1º Semestre\\IDENTIFICAÇÃO, ANÁLISE E EXPLORAÇÃO DE VULNERABILIDADES\\trabalho\\HardCodedCredentials',
                               'C:\\Users\\Roberto\\Desktop\\UAlg\\PosGraduação CiberSegurança\\1º Semestre\\IDENTIFICAÇÃO, ANÁLISE E EXPLORAÇÃO DE VULNERABILIDADES\\trabalho\\credentials_log.txt')
